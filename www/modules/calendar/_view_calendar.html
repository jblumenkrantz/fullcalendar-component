<!-- event view -->
<div ng-controller="EventCtl" id="main-content" style="height: 100%; overflow: hidden; position: relative; z-index: 2" class="small-12 columns transition-07"
	ng-class="{
		'large-8':(calendarDrawer && taskDrawer),
		'large-10':(calendarDrawer && !taskDrawer) || (!calendarDrawer && taskDrawer),
		'large-12':(!calendarDrawer && !taskDrawer),
		'push-2': calendarDrawer
	}">
	<header id="content-header" class="scroll-header">
		<ul class="small-block-grid-3">
			<li class="text-left">
				<span>
					<span class="hide-for-small" ng-click="toggle('calendarDrawer')" aria-hidden="true" ng-class="{'icon-arrow-left':calendarDrawer, 'icon-arrow-right':!calendarDrawer}" style="margin-left: 4px;"></span>
				</span>
				<span aria-hidden="true" class="icon-calendar-2"></span>
			</li>
			<li>
				<span aria-hidden="true" class="icon-arrow-left-2"></span>
				<span class="month-switcher">September</span>
				<span aria-hidden="true" class="icon-arrow-right-2"></span>
			</li>
			<li class="text-right">
				<span class="icon-plus-alt" ng-click="quickAdd()" aria-hidden="true"></span>
				<span>
					<span class="hide-for-small" ng-click="toggle('taskDrawer')" aria-hidden="true" ng-class="{'icon-arrow-right':taskDrawer, 'icon-arrow-left':!taskDrawer}" style="margin-right: 4px;"></span>
				</span>
			</li>
		</ul>
    </header>

    <!-- event quickAdd form -->
	<div id="quickEvent" class="transition-07 slide-drawer top-down" ng-class="{open:quickAdding}">
		<div ng-include src="'modules/calendar/_quickadd_event_form.html'"></div>
	</div>

	<!-- event add/edit form -->
	<div id="advancedEvent" class="transition-07 slide-drawer top-down" ng-class="{open:(addingEvent || editingEvent)}">
		<div ng-include src="'modules/calendar/_event_form.html'"></div>
	</div>

    <div scroll-pane class="scroll-pane"  style="border-left: 1px solid #afafaf; border-right: 1px solid #afafaf;">
		<!-- calendar views switch -->
		<div ng-switch="view">
			<div ng-switch-when="day">
				<day-view tasks="tasks" calendars="calendars" events="events" colors="calendarWatchers" filter="isCalendarShowing"></day-view>
			</div>

			<div ng-switch-when="week">
				<week-view tasks="tasks" calendars="calendars" events="events" colors="calendarWatchers" filter="isCalendarShowing"></week-view>
			</div>

			<div ng-switch-when="month">
				<month-view tasks="tasks" calendars="calendars" events="events" colors="calendarWatchers" filter="isCalendarShowing"></month-view>
			</div>

			<div ng-switch-when="list">
				<list-view></list-view>
			</div>

			<div ng-switch-when="datebook">
				<datebook-view tasks="tasks" calendars="calendars" events="events" colors="calendarWatchers" filter="isCalendarShowing"></datebook-view>
			</div>
		</div>
	</div>
</div>
<!-- / event view -->

<!-- task view -->
<div ng-controller="TaskCtl" id="tasks" style="height: 100%; overflow: hidden; right: 0px; z-index: 1;" class="small-12 large-2 columns drawer">
	<div class="pane-header scroll-header">
    	<span class="pane-title">Tasks/To Do</span>
    	<span ng-click="toggle('addingTask')" aria-hidden="true" class="icon-plus-alt right"></span>
    </div>
    <div scroll-pane class="scroll-pane">
		<!-- task entry form -->
		<div ng-show="addingTask">
			<task-form task="newTask" save="saveNew()" cancel="toggle('addingTask')" calendars="calendars"></task-form>
		</div>
		<!-- / task entry form -->

		<div ng-repeat="task in tasks | filter: isCalendarShowing">
			<view-task task="task" calendars="calendars" colors="calendarWatchers" ng-show="task.active"></view-task>
		</div>
	</div>
</div>
<!-- / task view -->

<!-- subscription view  gets pulled 10 columns from it's original position, all the way to the left. -->
<div ng-controller="SubscriptionCtl" id="my-calendars" style="height: 100%; overflow: hidden; left: 0px; z-index: 1;" class="small-12 large-2 columns drawer">
	<div class="pane-header scroll-header">
        <span class="pane-title">My Calendars</span>
        <span class="icon-plus-alt right" ng-click="add()" aria-hidden="true"></span>
    </div>

    <!-- SUBSCRIBED CALENDAR SECTION -->
	<div scroll-pane class="scroll-pane">
		<active-subscription
		 ng-repeat="calendar in subscribedCalendars = (calendars | filter:{active: 1, subscribed: true} | orderBy:'calendar_name')" 
			watcher="calendarWatchers"
			calendar="calendar">
		</active-subscription>
	</div>

	<!-- ADD CALENDAR SECTION -->
	<div id="add-calendar" class="transition-07 slide-drawer full bottom-up" ng-class="{open: addingSubscription}">
		<div class="scroll-header">
	    	<!-- calendar creation form -->
	    	<div class="pane-header">
		        <span class="pane-title">Add Calendars</span>
		        <span class="icon-x-altx-alt right" ng-click="add()" aria-hidden="true"></span>
		    </div>
			<div class="row">
				<input type="text" ng-model="newCalendar.calendar_name" placeholder="Name (required)" />
				<input type="text" ng-model="newCalendar.color" placeholder="Color (required)" />
			</div>
			<div class="row">
				<div class="large-12 columns">
					<div class="expand small button" ng-click="save()" >create</div>
				</div>
			</div>

			<!-- RECENTLY CREATED/SUBSCRIBED CALENDAR SECTION -->
			<div ng-show="recentCalendars.length" class="pane-header secondary" style="border-top: 1px solid #afafaf;">
		        <span class="pane-title">Recently Added Calendars</span>
		    </div>

			<!-- recently acquired calendars ng-repeat -->
			<active-subscription
				ng-repeat="calendar in recentCalendars = (calendars | filter:{active: 1, recent: true, subscribed: true} | orderBy:'calendar_name')"
				watcher="calendarWatchers"
				calendar="calendar">
			</active-subscription>
			

			<div ng-show="availabeCalendars.length || calFilter" class="pane-header secondary" style="border-top: 1px solid #afafaf;">
		        <span class="pane-title">Available Calendars</span>
		    </div>

		    <div style="position: relative;">
				<input style="margin: 0;" type="text" ng-model="calFilter" placeholder="Search Calendars" />
				<span style="position: absolute; top: 4px; right: 6px; font-size: 24px; color: #d4d4d4;" aria-hidden="true" class="icon-backspace" ng-click="calFilter=''"></span>
			</div>
		</div>
		<div scroll-pane-two watch="recentCalendars.length" style="overflow-y: auto;">
	    	<!-- available calendars ng-repeat -->
			<available-subscription
				ng-repeat="calendar in availabeCalendars = (calendars | filter:{active: 1, subscribed: false} | filter:calFilter | orderBy:'calendar_name')"
				watcher="calendarWatchers"
				calendar="calendar">
			</available-subscription>
		</div>
	</div>
</div>
<!-- / subscription view -->
