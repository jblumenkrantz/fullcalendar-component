<div
	resource-panel="editingCalendar"
	class="resource-panel transition-07"
	ng-class="{'open':editingCalendar, 'close':!editingCalendar}"
	ng-style="{background:calendar.color}">
	<div class="resource-gradient">
		<div class="resource-body transition-07">
			<!-- DISPLAY CALENDAR -->

			<div class="resource-display transition-07">
				<div class="row">
					<div class="large-12 columns" style="padding: 0;">
						<div class="subscribed" ng-hide="isCalendarCreator(calendar)" type="button"><span aria-hidden="true" class="icon-rss-alt" ng-style="{color:calendar.color}"></span></div>
						<input type='checkbox' ng-model="watcher[calendar.calendar_id].viewing" ng-click="setShowState()" ng-false-state="false" />
						<strong class="subscription-calendar-title" ng-click="edit()">
							{{calendar.calendar_name}}
						</strong>
					</div>
				</div>
			</div>

			<!-- EDIT CALENDAR -->

			<form name="editCalendarForm" class="subscription resource-edit transition-07" novalidate>
				<div class="resource-header pane-header small">
				    <span class="pane-title">Edit Calendar</span>
				    <span class="icon-x-altx-alt right" ng-click="cancel()" aria-hidden="true"></span>
				</div>
				<!-- Name -->
				<div class="row" style="padding-top: 1em;">
					<div class="large-12 columns">
						<label>Calendar:</label>
						<div class="resource-name">
							<input required type="text" focus-me="[editingCalendar]" delay="700" ng-model="editCalendar.calendar_name" placeholder="Name (required)" />
						</div>
						<div class="resource-color">
							<ui-colorpicker ng-model="editCalendar.color"></ui-colorpicker>
						</div>
					</div>
				</div>

				<!-- Public Checkbox -->
				<div class="row">
					<div class="large-12 columns" ng-show="hasPublic = checkPermision('modify_public_calendars',true)">
						<checkbox
							ng-model="editCalendar.public"
							text="This is a public calendar" 
						/>
					</div>
				</div>

				<!-- Reminders -->
				<reminder-list reminders="reminders"></reminder-list>

				<!-- Check for permissions for all these elements -->
				<div class="row" style="display: none;">
					<div class="large-12 columns" ng-show="checkPermision('modify_public_calendars',true)" >
						<select
							ng-show="checkPermision('modify_public_calendars').orgs.length > 1 && editCalendar.public"
							ng-options="permission.org_id as permission.org_name for permission in user.permissions | filter:{modify_public_calendars: true}"
							ng-model="editCalendar.org_id"
							class="ng-pristine ng-valid"
						>
							<option value="">-- Select Org --</option>
						</select>
						<label class=checkbox ng-show="checkPermision('modify_public_calendars').orgs.length == 1 && editCalendar.public">
							{{checkPermision('modify_public_calendars').orgs[0].org_name}}
						</label>
					</div>
					<div class="large-12 columns" ng-show="checkPermision('modify_public_calendars',true) || isCalendarCreator(calendar) || editCalendar.calendar_admin" >
						<ul class="button-group">
							<li>
								<button class="button radius" ng-show="editCalendar.calendar_admin || isCalendarCreator(calendar)">
									<span calendar-admin-modal-trigger="calendars" aria-hidden="true" class="icon-star">Calendar Admins</span> <!-- cancel -->
								</button>
							</li>
						</ul>
					</div>
				</div>
				<!-- End of Check for Permissions section -->
				<!--
				<div class="row" ng-show="editCalendar.has_reminder">
					<div class="large-12 columns">
						<div style="float: left; width: 20%; margin-right: 2%;">
							<input ng-required="editCalendar.has_reminder" type='number' min="1" ng-model="editCalendar.reminder_offset" placeholder="2" />
						</div>
						<div style="float: left;" class="with-offset">
							<!-- Relative Reminder Types 
							<select
								ng-options="r.id as r.name for r in reminderTypes | filter:{type:'relative'}"
								ng-model="editCalendar.reminder_type">
							</select>
						</div>
					</div>
				</div>
				-->

				<div class="row">
					<div class="large-12 columns">
						<ul class="button-group even-3">
							<li>
								<button ng-disabled="editCalendarForm.$invalid" class="button radius" ng-click="">
									<span aria-hidden="true" class="icon-share"></span> <!-- cancel -->
								</button>
							</li>
							<li>
								<button class="button radius" ng-click="unsubscribe()">
									<span aria-hidden="true" class="icon-remove-2"></span> <!-- unsubscribe -->
								</button>
							</li>
							<li style="padding-right: 0;">
								<button ng-disabled="editCalendarForm.$invalid" class="button radius" ng-click="update()">
									<span aria-hidden="true" class="icon-checkmark"></span> <!-- save -->
								</button>
							</li>
						</ul>
					</div>
				</div>
			</form>
		</div>
	</div>
</div>
