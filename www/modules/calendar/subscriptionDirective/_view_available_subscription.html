<div
	resource-panel="watcher[calendar.calendar_id].editingCalendar"
	class="resource-panel existing"
	ng-class="{'open':watcher[calendar.calendar_id].editingCalendar, 'close':!watcher[calendar.calendar_id].editingCalendar}"
	style="background: #222;">
	<div class="resource-gradient">
		<div class="resource-header pane-header small">
		    <span class="pane-title">{{editCalendar.calendar_name}}</span>
		    <span class="icon-x-altx-alt right" ng-click="cancel()" aria-hidden="true"></span>
		</div>
		<div class="resource-body">
			<div class="subscribed" ng-hide="isCalendarCreator(calendar)">
				<span aria-hidden="true" class="icon-rss-alt" style="color: #222;">
				</span>
			</div>

			<!-- DISPLAY CALENDAR -->

			<div class="resource-display">
				<label class="checkbox resource-checkbox">
					<span ng-hide="calendar.recent" ng-click="subscribe()" class="icon-calendarPlus"></span>
				</label>
				<div class="resource-data" ng-click="edit()">
					<strong class="resource-title">
						{{calendar.calendar_name}}
					</strong>
				</div>
			</div>

			<!-- EDIT CALENDAR -->

			<form name="editCalendarForm" class="subscription resource-edit" novalidate>
				<!-- Name -->
				<div class="row" style="padding-top: 1em;">
					<div class="large-12 columns">
						<div class="resource-name">
							<input required type="text" focus-me="[watcher[calendar.calendar_id].editingCalendar]" delay="500" ng-model="editCalendar.calendar_name" placeholder="Name (required)" />
						</div>
						<div class="color-selector">
							<ui-colorpicker ng-model="editCalendar.color"></ui-colorpicker>
						</div>
					</div>
				</div>

				<!-- Public Checkbox -->
				<div class="row" ng-show="hasPublic = checkPermision('modify_public_calendars',true)">
					<div class="large-12 columns">
						<checkbox
							ng-model="editCalendar.public"
							text="This is a public calendar" 
						/>
					</div>
				</div>

				<!-- Reminders -->
				<reminder-list reminders="reminders"></reminder-list>

				<!-- Check for permissions for all these elements -->
				<div class="row" style="display: none;">
					<div class="large-12 columns" ng-show="checkPermision('modify_public_calendars',true)" >
						<select
							ng-show="checkPermision('modify_public_calendars').orgs.length > 1 && editCalendar.public"
							ng-options="permission.org_id as permission.org_name for permission in user.permissions | filter:{modify_public_calendars: true}"
							ng-model="editCalendar.org_id"
							class="ng-pristine ng-valid"
						>
							<option value="">-- Select Org --</option>
						</select>
						<label class=checkbox ng-show="checkPermision('modify_public_calendars').orgs.length == 1 && editCalendar.public">
							{{checkPermision('modify_public_calendars').orgs[0].org_name}}
						</label>
					</div>
					<div class="large-12 columns" ng-show="checkPermision('modify_public_calendars',true) || isCalendarCreator(calendar) || editCalendar.calendar_admin" >
						<ul class="button-group">
							<li>
								<button class="button radius" ng-show="editCalendar.calendar_admin || isCalendarCreator(calendar)">
									<span calendar-admin-modal-trigger="calendars" aria-hidden="true" class="icon-star">Calendar Admins</span> <!-- cancel -->
								</button>
							</li>
						</ul>
					</div>
				</div>
				<!-- End of Check for Permissions section -->

				<div class="row">
					<div class="large-12 columns">
						<ul class="button-group even-2">
							<li>
								<button
									class="button radius"
									ng-click="cancel()">
									<span aria-hidden="true" class="icon-remove-2"></span> <!-- save -->
								</button>
							</li>
							<li style="padding-right: 0;">
								<button
									ng-disabled="editCalendarForm.$invalid"
									class="button radius"
									ng-click="subscribe()">
									<span aria-hidden="true" class="icon-checkmark"></span> <!-- save -->
								</button>
							</li>
						</ul>
					</div>
				</div>
			</form>
		</div>
	</div>
	<!--<div
	class="resource-panel existing"
	style="background: #222;">
	<div class="resource-gradient">
		<div class="resource-body">
			<div class="resource-display">
				<label class="checkbox resource-checkbox">
					<span ng-hide="calendar.recent" ng-click="subscribe()" class="icon-calendarPlus"></span>
				</label>
				<div class="resource-data" ng-click="subscribe()">
					<strong class="resource-title">
						{{calendar.calendar_name}}
					</strong>
				</div>
			</div>
		</div>
	</div>
</div>-->
</div>
