<form name="taskForm" class="task" novalidate>
	<!-- NAME -->
	<div ng-click="cancel()" class="close-panel">
		<span aria-hidden="true" class="icon-x-altx-alt" ></span>
	</div>
	<input focus-me="[tasking]" required type="text" class="on-date" ng-model="task.title" placeholder="Untitled task" />
	<!-- CALENDAR -->
	<select
		ng-change="switchCalendar(task)"
		ng-options="calendar.calendar_id as calendar.calendar_name for calendar in calendars | filter:{subscribed: true} | orderBy: 'calendar_name'"
		ng-model="task.calendar_id"
		class="on-date">
	</select>
	<!-- NOTES -->
	<textarea ng-model="task.task_notes" placeholder="Add a note"></textarea>
	<!-- HAS A DUE DATE CHECKBOX -->
	<label class="checkbox" ng-class="{'on-date':task.has_due_date}">
		<input type="checkbox" ng-model="task.has_due_date" ng-change="dueDateToggle(task);" />
		Has a due date
	</label>
	<!-- DUE DATE -->
	<div class="calendar-picker-container nolabel">
		<datetime
			ng-required="task.has_due_date"
			ng-show="task.has_due_date"
			ng-model="task.start"
			placeholder="m/d/yyyy h:mm AM/PM"
			date-format="MM/d/yyyy"
			time-format="h:mm a"
			divider="@"
			dte-opts="{spinnerImage: '', datetimeFormat: 'o/d/Y @ h:M a'}"
			jqui-opts="{dateFormat: 'm/d/yy'}"
		/>
	</div>
	<!-- REMINDER CHECKBOX -->
	<label class="checkbox" ng-class="{'on-date':task.has_reminder}">
		<input type="checkbox" ng-model="task.has_reminder" ng-click="reminderToggle(task)" />
		Add Reminder
	</label>
	<!-- REMINDER SETTINGS -->
	<div class="row">
		<div class="large-12 columns" ng-show="task.has_reminder" style="padding: 0;">
		<!-- Reminder Offset -->
		<div
			ng-hide="
				hideOffset =
				typeIsThree ||
				task.reminder_type == 7 ||
				task.reminder_type == null
				"
			style="float: left; width: 20%; margin-right: 2%;">
			<input ng-required="!hideOffset" type='number' min="1" ng-change="usingOwnReminder(task)" ng-model="task.reminder_offset" placeholder="2" />
		</div>

		<div style="float: left;" ng-class="{'with-offset':!hideOffset, 'without-offset':hideOffset}">
			<!-- Reminder Types -->
			<select
				ng-class="{'on-date': typeIsThree}"
				ng-options="r.id as r.name for r in reminderTypes | filter:reminderTypeFilter()"
				ng-model="task.reminder_type"
				ng-change="usingOwnReminder(task)">
			</select>
			<!-- Absolute Reminder Datetime -->
			<div class="calendar-picker-container nolabel">
				<datetime
					ng-model="task.reminder_datetime"
					placeholder="m/d/yyyy h:mm AM/PM"
					ng-show="typeIsThree = task.reminder_type == 3"
					ng-required="typeIsThree"
					date-format="MM/d/yyyy"
					time-format="h:mm a"
					divider="@"
					dte-opts="{spinnerImage: '', datetimeFormat: 'o/d/Y @ h:M a'}"
					jqui-opts="{dateFormat: 'm/d/yy'}"
				/>
			</div>
		</div>

		<div style="clear: both;"></div>

		<div style="font-size: 12px; margin: -0.8em 0 1em 0;">
			This task is using
			<span ng-show="task.using_calendar_reminder">
				its calendar's reminder.
				<span style="cursor: pointer; text-decoration: underline;" ng-click="noReminder(task)">Don't remind me.</span>
			</span>
			<span ng-show="!task.using_calendar_reminder && task.reminder_type != 7">
				its own reminder.
				<span ng-if="task.using_calendar_reminder!=undefined" style="cursor: pointer; text-decoration: underline;" ng-click="checkCalendarReminder()">Use calendar reminder.</span></span>
			</span>
			<span ng-show="task.reminder_type == 7">
				no reminder.
				<span ng-if="task.using_calendar_reminder!=undefined" style="cursor: pointer; text-decoration: underline;" ng-click="checkCalendarReminder()">Use calendar reminder.</span></span>
			</span>
		</div>
	</div>
	<!-- BUTTONS -->
	<div class="row">
		<div class="large-12 columns">
			<ul class="button-group" ng-class="{'even-2':!existingTask, 'even-3':existingTask}">
				<li>
					<button ng-show="existingTask = task.version != undefined" ng-disabled="taskForm.$invalid" class="button radius" ng-click="share()">
						<span aria-hidden="true" class="icon-share"></span>
					</button>
					<button ng-hide="existingTask" class="button radius" ng-click="reset()">
						<span aria-hidden="true" class="icon-reload-alt"></span>
					</button>
				</li>
				<li ng-show="existingTask">
					<button class="button radius" ng-click="delete()">
						<span aria-hidden="true" class="icon-remove2"></span>
					</button>
				</li>
				<li style="padding-right: 0;">
					<button ng-disabled="taskForm.$invalid" class="button radius" ng-click="save()">
						<span aria-hidden="true" class="icon-checkmark"></span>
					</button>
				</li>
			</ul>
		</div>
	</div>
</form>
