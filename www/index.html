<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>TryPinwheel.com | The Jedi Academy, Dantooine</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

    <!-- build:css({.tmp,app}) styles/main.css -->
    <link rel="stylesheet" href="assets/styles/glyphs.css">
    <link rel="stylesheet" href="assets/styles/main.css">
    <link rel="stylesheet" href="assets/styles/foundation.css">
    <link rel="stylesheet" href="assets/styles/datetimeentry.css">
    <link rel="stylesheet" href="assets/styles/spectrum.css"> 
	<link rel="stylesheet" href="bower_components/jquery-ui/themes/smoothness/jquery-ui.min.css">
    <!-- <link href='//fonts.googleapis.com/css?family=Oswald:400,300,700' rel='stylesheet' type='text/css'>    -->
    <!-- endbuild -->
</head>
  <body ng-app="pinwheelApp">
    <!--[if lt IE 7]>
      <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
    <![endif]-->

    <!--[if lt IE 9]>
      <script src="bower_components/es5-shim/es5-shim.js"></script>
      <script src="bower_components/json3/lib/json3.min.js"></script>
    <![endif]-->

    <!-- Add your site or application content here -->
	<div ng-controller="PinwheelCtl">
        <!-- header -->
        <nav id="mainHeader" class="top-bar" ng-include src="'modules/_topbar.html'"></nav>
        <!-- / header -->

		<!-- main content -->
		<!-- route pane -->
		<div class="large-12 columns" style="padding: 0;" ng-view=""></div>
		<!-- / route pane -->
		<!-- / main content -->

<!-- task view -->
<div ng-controller="TaskCtl" id="tasks" style="height: 100%; overflow: hidden; right: 0px; z-index: 1;" class="small-12 large-2 columns drawer">
	<div class="pane-header scroll-header">
    	<span class="pane-title">Tasks/To Do</span>
    	<span ng-click="toggle('addingTask')" aria-hidden="true" class="icon-plus-alt right"></span>
    </div>
    <div ng-show="loading_tasks" class="spinwheel"></div>
    <div scroll-pane class="scroll-pane">
		<!-- task entry form -->
		<div ng-show="addingTask">
			<task-form task="newTask" save="saveNew()" cancel="toggle('addingTask')" calendars="calendars"></task-form>
		</div>
		<!-- / task entry form -->

		<div ng-repeat="task in tasks | filter: isCalendarShowing">
			<view-task task="task" calendars="calendars" colors="calendarWatchers" ng-show="task.active"></view-task>
		</div>
	</div>
</div>
<!-- / task view -->

<!-- subscription view  gets pulled 10 columns from it's original position, all the way to the left. -->
<div ng-controller="SubscriptionCtl" id="my-calendars" style="height: 100%; overflow: hidden; left: 0px; z-index: 1;" class="small-12 large-2 columns drawer">
	<div class="pane-header scroll-header">
        <span class="pane-title">My Calendars</span>
        <span class="icon-plus-alt right" ng-click="add()" aria-hidden="true"></span>
    </div>
	<div ng-show="loading_calendars" class="spinwheel"></div>
    <!-- SUBSCRIBED CALENDAR SECTION -->
	<div scroll-pane class="scroll-pane">
		<div class="calendar-wrapper">
			<active-subscription
		 ng-repeat="calendar in subscribedCalendars = (calendars | filter:{active: 1, subscribed: true} | orderBy:'calendar_name')" 
			watcher="calendarWatchers"
			calendar="calendar"
			user="user">
		</active-subscription>
		</div>
	</div>

	<!-- ADD CALENDAR SECTION -->
	<div id="add-calendar" class="transition-07 slide-drawer full bottom-up" ng-class="{open: addingSubscription}">
		<div class="scroll-header">
	    	<!-- calendar creation form -->
	    	<div class="pane-header">
		        <span class="pane-title">Add Calendars</span>
		        <span class="icon-x-altx-alt right" ng-click="add()" aria-hidden="true"></span>
		    </div>
			<div class="row">
				<input type="text" ng-model="newCalendar.calendar_name" placeholder="Name (required)" />
				<input type="text" ng-model="newCalendar.color" placeholder="Color (required)" />
			</div>
			<div class="row">
				<div class="large-12 columns">
					<div class="expand small button" ng-click="save()" >create</div>
				</div>
			</div>

			<!-- RECENTLY CREATED/SUBSCRIBED CALENDAR SECTION -->
			<div ng-show="recentCalendars.length" class="pane-header secondary" style="border-top: 1px solid #afafaf;">
		        <span class="pane-title">Recently Added </span>
		    </div>

			<!-- recently acquired calendars ng-repeat -->
			<active-subscription
				ng-repeat="calendar in recentCalendars = (calendars | filter:{active: 1, recent: true, subscribed: true} | orderBy:'calendar_name')"
				watcher="calendarWatchers"
				calendar="calendar">
			</active-subscription>
			

			<div ng-show="availabeCalendars.length || calFilter" class="pane-header secondary" style="border-top: 1px solid #afafaf;">
		        <span class="pane-title">Available Calendars</span>
		    </div>

		    <div style="position: relative;">
				<input style="margin: 0;" type="text" ng-model="calFilter" placeholder="Search Calendars" />
				<span style="  cursor: pointer !important;" aria-hidden="true" class="icon-backspace" ng-click="calFilter=''"></span>
			</div>
		</div>
		<div scroll-pane-two watch="recentCalendars.length" style="overflow-y: auto;">
	    	<!-- available calendars ng-repeat -->
			<available-subscription
				ng-repeat="calendar in availabeCalendars = (calendars | filter:{active: 1, subscribed: false} | filter:calFilter | orderBy:'calendar_name')"
				watcher="calendarWatchers"
				calendar="calendar">
			</available-subscription>
		</div>
	</div>
</div>
<!-- / subscription view -->
	</div>
	<!-- / application content -->

    <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
    <script>
        var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
        (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
        g.src='//www.google-analytics.com/ga.js';
        s.parentNode.insertBefore(g,s)}(document,'script'));
        Date.prototype.addHours = function(h){
            this.setHours(this.getHours()+h);
            return this;
        }
    </script>

    <!-- build:js scripts/modules.js -->
    <script src="bower_components/jquery/jquery.js"></script>
	<script src="bower_components/jquery-ui/ui/jquery-ui.js"></script>
	<script src="bower_components/angular/angular.js"></script>
    <script src="bower_components/angular-route/angular-route.js"></script>
	<script src="bower_components/angular-ui-date/src/date.js"></script>
    <script src="bower_components/angular-resource/angular-resource.js"></script>
    <script src="bower_components/angular-cookies/angular-cookies.js"></script>
    <script src="bower_components/angular-animate/angular-animate.min.js"></script>
    <script src="bower_components/angular-sanitize/angular-sanitize.js"></script>
    <script src="assets/js/datetimeentry/datetimeentry.min.js"></script>
    <script src="assets/js/spectrum/spectrum.min.js"></script>
    <!-- endbuild -->

    <!-- build:js({.tmp,app}) scripts/scripts.js -->
    <script src="modules/app.js"></script>
    <script src="modules/pinwheelCtl.js"></script>
    <script src="modules/login/loginCtl.js"></script>
    <script src="modules/calendar/taskCtl.js"></script>
    <script src="modules/calendar/eventCtl.js"></script>
    <script src="modules/calendar/subscriptionCtl.js"></script>
    <script src="modules/calendar/calendarCtl.js"></script>
    <script src="modules/calendar/calendar_views/datebookViewDirective/datebookView.js"></script>
    <script src="modules/calendar/calendar_views/dayViewDirective/dayView.js"></script>
    <script src="modules/calendar/calendar_views/listViewDirective/listView.js"></script>
    <script src="modules/calendar/calendar_views/monthViewDirective/monthView.js"></script>
    <script src="modules/calendar/calendar_views/weekViewDirective/weekView.js"></script>
    <script src="modules/calendar/calendar_views/yearViewDirective/yearView.js"></script>
    <script src="modules/calendar/viewTaskDirective/viewTask.js"></script>
    <script src="modules/calendar/taskFormDirective/taskForm.js"></script>
    <script src="modules/calendar/subscriptionDirective/activeSubscription.js"></script>
    <script src="modules/calendar/subscriptionDirective/availableSubscription.js"></script>
    <script src="modules/calendar/subscriptionDirective/subscriptionDirectiveCtl.js"></script>
    <script src="modules/confirm/confirmCtl.js"></script>
    <script src="modules/reference/referenceCtl.js"></script>
    <script src="modules/messaging/messagingCtl.js"></script>
    <script src="modules/handbook/handbookCtl.js"></script>
    <script src="modules/settings/settingsCtl.js"></script>
    <script src="modules/settings/settingsForm.js"></script>
    <script src="modules/quickAddParser.js"></script>
    <script src="modules/interfaceDirectives.js"></script>
    <!-- endbuild -->
</body>
</html>
